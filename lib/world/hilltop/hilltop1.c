/* Majik 4 server
 * Copyright (C) 1998, 1999  Majik Development Team <majik@majik.netti.fi>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */

inherit GRIDMAP;

#include <color.h>
#include <behavior.h>
#include <door.h>

void
create_gridmap ()
{
   int x, y;
   object o, o2;
   
   x = area_x * 100;
   y = area_y * 100;
   
   set_gridmap (
				 
({
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????..??????????????????????????????????????????????????????????????????????????????????????????",
"??????......????????????????????????????????????????????????????????????????????????????????????????",
"?????........???????????????????????????????????????????????????????????????????????????????????????",
"?????...>....???????#########???????????????????????????????????????????????????????????????????????",
"??????......???????###########??????????????????????????????????????????????????????????????????????",
"?????????.???????#####000#############??????????????????????????????????????????????????????????????",
"????????..?????#######0 0###############????????????????????????????????????????????????????????????",
"???????....??????#####000###################????????????????????????????????????????????????????????",
"??????......????#########0###################???????????????????????????????????????????????????????",
"????.......?????#########000000####00#########??????????????????????????????????????????????????????",
"???...???????????########0####0000000########???????????????????????????????????????????????????????",
"????..???????????########000######000#######????????????????????????????????????????????????????????",
"?????...???????????########0##############??????????????????????????????????????????????????????????",
"??????...????????????????##00#???########???????????????????????????????????????????????????????????",
"???????..?????????.....???...???????####????????????????????????????????????????????????????????????",
"???????...??????....??...?...???????????????????????????????????????????????????????????????????????",
"????????...???...???????....????????????????????????????????????????????????????????????????????????",
"??????????......????????????????????????????????????????????????????????????????????????????????????",
"????????????...????????????WWWWWW??WWWWWWW??????????????????????????????????????????????????????????",
"????????????...????WWWWWW??WwwwwW??WwwwwwW??????????????????????????????????????????????????????????",
"?????????????...???WwwwwW??WwwwwW??WwwwwwW??????????????????????????????????????????????????????????",
"????????????...????WwwwwW??WWWwWW??WwwwwwW??????????????????????????????????????????????????????????",
"?????????????....??WWWWwW..........WWwWWWW??????????????????????????????????????????????????????????",
"???????????????............................?????????????????????????????????????????????????????????",
"?????????????????..........................?????????????????????????????????????????????????????????",
"???????????????????.................WWWWWWWWW???????????????????????????????????????????????????????",
"????????????????????................WwwwwwwwW???????????????????????????????????????????????????????",
"??????????????????..................wwwwww>wW???????????????????????????????????????????????????????",
"?????????????????...................WwwwwwwwW???????????????????????????????????????????????????????",
"???????????????????.................WWWWWWWWW???????????????????????????????????????????????????????",
"?????????????????????....???.....???????????????????????????????????????????????????????????????????",
"???????????????????????????...??????????????????????????????????????????????????????????????????????",
"????????????????????????????...?????????????????????????????????????????????????????????????????????",
"????????????????????????????...?????????????????????????????????????????????????????????????????????",
"??????????????????????????....??????????????????????????????????????????????????????????????????????",
"?????????????????????????...????????????????????????????????????????????????????????????????????????",
"?????????????????????WWWW...????????????????????????????????????????????????????????????????????????",
"?????????????????????WwwW.1...??????????????????????????????????????????????????????????????????????",
"?????????????????????Wwww.16...?????????????????????????????????????????????????????????????????????",
"?????????????????????WWWW........???????????????????????????????????????????????????????????????????",
"??????????????????????????...??...??????????????????????????????????????????????????????????????????",
"?????????????????????????????????..?????????????????????????????????????????????????????????????????",
"??????????????????????????????????..????????????????????????????????????????????????????????????????",
"?????????????????????????????????...????????????????????????????????????????????????????????????????",
"??????????????????????????????????..????????????????????????????????????????????????????????????????",
"???????????????????????????????????.........................????????????????????????????????????????",
"???????????????????????????????????????????????.......................................??????????????",
"???????????????????????????????????????????????????????????????????.????????????????????????????????",				
"???????????????????????????????????????????????????????????????????.????????????????????????????????",				
"???????????????????????????????????????????????????????????????????.????????????????????????????????",				
"???????????????????????????????????????????????????????????????????.????????????????????????????????",				
"???????????????????????????????????????????????????????????????????..???????????????????????????????",
"????????????????????????????????????????????????????????????????????.???????????????????????????????",
"????????????????????????????????????????????????????????????????????.???????????????????????????????",
"???????????????????????????????????????????????????????????????????.????????????????????????????????",
"???????????????????????????????????????????????????????????????????.????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"?????????????..????..????....????......????..????..??..??????..?????????????????????????????????????",
"?????????????..????..???..??..???..???..???..????..??...????...?????????????????????????????????????",
"?????????????..????..???..??..???..????.???..????..??..?.??.?..?????????????????????????????????????",
"?????????????..????..??..????..??..???..???..????..??..??..??..?????????????????????????????????????",
"?????????????........??........??......????..????..??..??????..?????????????????????????????????????",
"?????????????..????..??..????..??..?..?????..????..??..??????..?????????????????????????????????????",
"?????????????..????..??..????..??..??..????..????..??..??????..?????????????????????????????????????",
"?????????????..????..??..????..??..???..???..????..??..??????..?????????????????????????????????????",
"?????????????..????..??..????..??..????..???......???..??????..?????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????",
"????????????????????????????????????????????????????????????????????????????????????????????????????"
}));
   
   add_description (22,38,24,39, "Hut",
					"You are standing inside hut which seems to be look "
					+ "point of the hilltop village. Usually here stands a "
					+ "guard watching all traffic going in and out from the "
					+ "village.");
   
   add_description (36,27,43,29, "Hilltop Inn",
					"You are inside a quiet village inn. The air here is "
					+ "warm but silent. This seems to be the only inn here in "
					+ "Hilltop village. The furnishings look new, as if the "
					+ "inn had only been open only few months.");
   
   o = add_object (37, 27, "item", 0, "torch");
   o->set_gridlight (4);
   o->set_fuel (-1);
   o->set_over ("There is a torch hanging in the wall.");
   o->set_invis (1);
   o->set_no_get ("The torch is firmly attached to the wall.");
   
   o = add_object (43, 27, "item", 0, "torch");
   o->set_gridlight (4);
   o->set_fuel (-1);
   o->set_over ("There is a torch hanging in the wall.");
   o->set_invis (1);
   o->set_no_get ("The torch is firmly attached to the wall.");
   
   o = add_object (43, 29, "item", 0, "torch");
   o->set_gridlight (4);
   o->set_fuel (-1);
   o->set_over ("There is a torch hanging in the wall.");
   o->set_invis (1);
   o->set_no_get ("The torch is firmly attached to the wall.");
   
   o = add_object (37, 29, "item", 0, "torch");
   o->set_gridlight (4);
   o->set_fuel (-1);
   o->set_over ("There is a torch hanging in the wall.");
   o->set_invis (1);
   o->set_no_get ("The torch is firmly attached to the wall.");
   
   o = clone_object ("/inherit/board");
   o->move (THOB, 39, 28);
   
   o = clone_object ("/world/hilltop/npc/innkeeper");
   o->set_wander (DIST_WANDER, 60, ({ x+41, y+28, 4 }));
   o->move (THOB, 41, 28);
   
   /* The innkeeper will have a key for his own inn. */
   
   o2 = GENERIC_D->generate ("item", "iron", "key");
   o2->set_door (36, 28);
   o2->move (o, -1, -1);
   
   /* And a door ... */
   
   add_door (36, 28, "oak", DOOR_OPEN, LOCK_EASY);
   
   add_description (20,21,23,23, "Hilltop village bank",
					"You are standing in the hilltop village's bank. There "
					+ "a small sign hanging from the ceiling, describing "
					+ "something important.");
   
   o = clone_object ("/world/hilltop/npc/banker");
   o->set_wander (DIST_WANDER, 60, ({ x+21, y+21, 2 }));
   o->move (THOB, 21, 21);
      
   add_door (23, 23, "oak", DOOR_OPEN, LOCK_EASY);
   
   add_description (28,20,31,22, "Post office",
					"You are standing in a post office which once was known "
					+ "as Gnome & Brownie co., but now the poor little brownie "
					+ "rests in peace, killed by our evil lord, Sinister. "
					+ "However, gnome has now a new comrade, big one, a mailer "
					+ "daemon!");
   
   add_door (30, 22, "oak", DOOR_LOCKED, LOCK_EASY);
   
   add_description (36,20,40,23, "The General Store",
					"You are standing in the general store of the Hilltop "
					+ "Village.");
   
   o = clone_object ("/world/hilltop/npc/grocer");
   o->set_wander (DIST_WANDER, 60, ({ x+38, y+21, 2 }));
   o->move (THOB, 38, 21);
   
   add_door (37, 23, "oak", DOOR_OPEN, LOCK_EASY);
   
   add_description (17,24,35,31, "Intersection",
					"You are standing in the middle of the Hilltop Village "
					+ "central square, which acts as an intersection between "
					+ "all the major roads and paths in the vicinity. To your "
					+ "east you can spot a clean-looking inn, whose smoking "
					+ "chimney gives it a very cozy touch. There's also a "
					+ "post office to the north, but it does not look that "
					+ "popular considering the village is rather small. The "
					+ "road to your west goes up a rather high hill, while "
					+ "the road southeast is gently down-sloping in nature.");
         
   add_description (5,1,12,6, "Legendary Hilltop of the Gods",
					"You are standing in the blessed ground of the gods. The "
					+ "place where gods' magical flying room crashed. You "
					+ "can still see some parts of that mystical room around "
					+ "you. Maybe the blessed plaque of explorers was once "
					+ "in the flying room too. You wonder why the gods let "
					+ "their toy to crash here.");
   
   o = clone_object ("/world/hilltop/npc/aberax");
   o->set_wander (DIST_WANDER, 60, ({ x+7, y+3, 2 }));
   o->move (THOB, 7, 3);
   
   add_description (4,7,11,10, "Plaque of Explorers",
					"You are standing in the hill near legendary hilltop of "
					+ "the gods which is just few steps to the north. There "
					+ "is also a blessed and magical plaque of explorers "
					+ "which keeps track of all good adventurers. Legend says "
					+ "it is a gift from a god of healing, Dazzt.");
   
   add_description (3,11,10,17, "Western hill path",
					"You are climbing up a gradually rising hill. You are "
					+ "almost certain this road leads to the legendary "
					+ "Hilltop of Gods.");
   
   add_description (10,18,15,19, "Crossing",
					"You are standing on a lading between two rather high "
					+ "hills. The thin hill-path separates into two even "
					+ "smaller ones, of which the other one leads west, to "
					+ "what appears to be a very high hill, maybe even the "
					+ "legendary Hilltop of Gods, while the other continues "
					+ "west.");
   
   add_description (12,20,16,24, "Hill path",
					"You are walking on a hill path going upwards on the "
				    + "hill. It is leading away from the Hilltop Village "
					+ "which is in east. Looking forward to the hill you "
					+ "can see a high hilltop waiting you to climb there.");
   
   add_description (26,32,30,35, "Hill path",
					"You are walking down a hill path which leads away "
					+ "from Hilltop Village to a hill where there seems "
					+ "to be a forest.");
      
   add_description (25,36,30,41, "Look point",
					"You are walking along a hill path which has been "
					+ "laid between the forest and Hilltop Village. A crude "
					+ "hut, apparently a guard house of some sort, has been "
					+ "built next to a large birch tree, whose mighty shadow "
					+ "ominously embraces the ground.");
   
   o = clone_object("/world/hilltop/npc/guard");
   o->move(THOB,22,38);
   o->set_wander (DIST_WANDER, 60, ({ x+27, y+38,  5}));
   o->add_object(GENERIC_D->generate("weapon","iron","great sword"), 1);
         
   add_door (24, 39, "oak", DOOR_OPEN, LOCK_EASY);
   
   add_description (31,40,36,46, "Forest path",
					"You are in a lush, green forest. The merry singing of "
					+ "starlings can be heard from a distance and it is only "
					+ "surpassed by the wind whistling in the willows. The "
					+ "forest seems to get more and more dense when moving "
					+ "south along the path. In the north there awaits some "
					+ "pretty hard-looking territory with several hills and "
					+ "ridges. You can spot a small settlement there as "
					+ "as well.");
   
   add_description (14,15,25,17, "Eastern hill path",
					"You are walking on the gently down sloping eastern hill "
					+ "path. Looking back you can still see the T-junction of "
					+ "the paths at a distance.");
   
   add_description (26,14,28,17, "Cave entrance",
					"You are standing before the mouth of a dark and opaque "
					+ "cave. You feel reluctant to enter, but you can't help "
					+ "but wonder what might be in there... Maybe you should "
					+ "explore further?");
   
   add_description (25,12,27,13, "Cave",
					"You are in a murky cave, or at least what seems to be "
					+ "the beginning of one. A sinister blackness prevents "
					+ "you from seeing anything to the north, where the "
					+ "cave continues deeper into the caverns. Eerie light "
					+ "is emanating from the south, where there is an "
					+ "apparent exit to the outerworld.");
   
   add_description (25,9,33,11, "Cave",
					"You are surrounded by darkness. Your heels touching "
					+ "the ground you stand on and the moisture gathering "
					+ "on your forehead are the only possible hints of "
					+ "where you are. A cave maybe? Gentle tinkling of "
					+ "flowing water can be heard from somewhere deeper in "
					+ "the cavern.");
   
   add_description (34,10,36,12, "Cave chamber",
					"You are in a chamber somewhere in the caverns. There is "
					+ "an old fireplace in the middle of the room and all "
					+ "kinds of other things suggesting that someone is "
					+ "living here. There is a small sign on the wall. The "
					+ "eastern wall looks strange somehow.");

   add_description (22,6,24,8, "Cave",
					"You are standing somewhere very deep in the caverns. It "
					+ "is very, very dark here, however you are able to "
					+ "notice a large hole on the ground, which is even "
					+ "darker than the rest of the room. You could try your "
					+ "luck by jumping in the hole, but it is impossible "
					+ "to decipher whether there's a bottom or not.");
   
   add_special (23,7,23,7, "special_hole");
      
   o = add_object(36, 10, "item", "random", "torch");
   o->set_gridlight(2);
   o->set_fuel(-1);
   o->set_invis(1);
   o->set_over("There's a small fireplace here.");
   o->set_no_get("You can't take the fireplace.");
   
   o = clone_object("/world/hilltop/npc/trainer");
   o->move(THOB, 36, 11);
   o->add_object(GENERIC_D->generate("weapon","steel","dagger"), 1);
   o->add_object(GENERIC_D->generate("clothing","random","black robe"), 1);
   o->add_object(GENERIC_D->generate("armor","leather","black boots"), 1);
         
   add_stair (({ 4, 8 }), "/world/hilltop/hilltopcellar!y4x8");
   add_stair (({ 28,42 }), "/world/hilltop/hilltopcellar!y28x42");
}

int
get_x ()
{
   return 20;
}

int get_y ()
{
   return 20;
}

int
command_list ()
{
   message (CMD_MSG, 0,0,0, "The shop is empty, sorry.", THIS);
   return 1;
}

int
special_hole ()
{
   message (CMD_MSG, 0,0,0, "You should be transfered to somewhere else as you jumped to the hole.", THIS);
   return 1;
}
